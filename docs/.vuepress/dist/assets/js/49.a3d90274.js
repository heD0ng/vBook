(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{363:function(v,_,e){"use strict";e.r(_);var t=e(7),a=Object(t.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"https加密传输过程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#https加密传输过程"}},[v._v("#")]),v._v(" HTTPS加密传输过程")]),v._v(" "),_("p",[_("code",[v._v("HTTPS")]),v._v("全称"),_("code",[v._v("Hyper Text Transfer Protocol over SecureSocket Layer")]),v._v("，是以安全为目标的"),_("code",[v._v("HTTP")]),v._v("通道，在"),_("code",[v._v("HTTP")]),v._v("的基础上通过传输加密和身份认证保证了传输过程的安全性。"),_("code",[v._v("HTTPS")]),v._v("在"),_("code",[v._v("HTTP")]),v._v("的基础下加入"),_("code",[v._v("SSL")]),v._v("层，"),_("code",[v._v("HTTPS")]),v._v("的安全基础是"),_("code",[v._v("SSL")]),v._v("，因此加密的详细内容就需要"),_("code",[v._v("SSL")]),v._v("。")]),v._v(" "),_("h2",{attrs:{id:"知识储备"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#知识储备"}},[v._v("#")]),v._v(" 知识储备")]),v._v(" "),_("h3",{attrs:{id:"http"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#http"}},[v._v("#")]),v._v(" HTTP")]),v._v(" "),_("p",[_("code",[v._v("HTTP")]),v._v("是应用层协议，默认运行在"),_("code",[v._v("80")]),v._v("端口，是一种不安全的传输协议，经其传输的数据都是未加密的明文数据，可以被中间人攻击，获取到你的网络传输数据，这也就是尽量不要使用公共场所"),_("code",[v._v("WIFI")]),v._v("的原因。")]),v._v(" "),_("h3",{attrs:{id:"https"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#https"}},[v._v("#")]),v._v(" HTTPS")]),v._v(" "),_("p",[_("code",[v._v("HTTPS")]),v._v("是应用层协议，默认运行在"),_("code",[v._v("443")]),v._v("端口，是一种安全的传输协议，通过在"),_("code",[v._v("HTTP")]),v._v("层与运输层的"),_("code",[v._v("TCP")]),v._v("直接加入一个加密/身份验证层来保证安全传输。")]),v._v(" "),_("h3",{attrs:{id:"ssl"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ssl"}},[v._v("#")]),v._v(" SSL")]),v._v(" "),_("p",[_("code",[v._v("SSL")]),v._v("安全套接层"),_("code",[v._v("Secure Sockets Layer")]),v._v("，位于"),_("code",[v._v("TCP/IP")]),v._v("协议与各种应用层协议之间，为数据通讯提供安全支持。"),_("code",[v._v("SSL")]),v._v("协议可分为两层："),_("br"),v._v(" "),_("code",[v._v("SSL")]),v._v("记录协议"),_("code",[v._v("SSL Record Protocol")]),v._v("：它建立在可靠的传输协议如"),_("code",[v._v("TCP")]),v._v("之上，为高层协议提供数据封装、压缩、加密等基本功能的支持。"),_("br"),v._v(" "),_("code",[v._v("SSL")]),v._v("握手协议"),_("code",[v._v("SSL Handshake Protocol")]),v._v("：它建立在"),_("code",[v._v("SSL")]),v._v("记录协议之上，用于在实际的数据传输开始前，通讯双方进行身份认证、协商加密算法、交换加密密钥等。")]),v._v(" "),_("h3",{attrs:{id:"tls"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#tls"}},[v._v("#")]),v._v(" TLS")]),v._v(" "),_("p",[_("code",[v._v("TLS")]),v._v("传输层安全性协议"),_("code",[v._v("Transport Layer Security")]),v._v("用于在两个通信应用程序之间提供保密性和数据完整性，其由"),_("code",[v._v("TLS")]),v._v("记录协议和"),_("code",[v._v("TLS")]),v._v("握手协议组成。"),_("code",[v._v("TLS1.0")]),v._v("即为"),_("code",[v._v("SSL3.0")]),v._v("的标准化版本，"),_("code",[v._v("SSL")]),v._v("最初由网景"),_("code",[v._v("Netscape")]),v._v("提出研发，在"),_("code",[v._v("SSL3.0")]),v._v("时由国际互联网工程任务组"),_("code",[v._v("IETF")]),v._v("进行了标准化并添加了少量机制，并更名为"),_("code",[v._v("TLS1.0")]),v._v("。")]),v._v(" "),_("h3",{attrs:{id:"对称加密"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#对称加密"}},[v._v("#")]),v._v(" 对称加密")]),v._v(" "),_("p",[v._v("简单来说对称加密的加密密钥和解密密钥是相同的，对称加密的效率要比非对称加密高。")]),v._v(" "),_("h3",{attrs:{id:"非对称加密"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#非对称加密"}},[v._v("#")]),v._v(" 非对称加密")]),v._v(" "),_("p",[v._v("简单来说非对称加密的加密密钥与解密密钥是不同的，需要一把公钥与一把私钥，私钥不能被其他任何人知道，公钥则可以随意公开。公钥加密，私钥解密；私钥数字签名，公钥验证。")]),v._v(" "),_("h3",{attrs:{id:"ca"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ca"}},[v._v("#")]),v._v(" CA")]),v._v(" "),_("p",[v._v("由于公钥是放在服务器的，在建立连接的过程中将公钥传输到用户，但是如何避免中间人攻击，即在传输公钥的过程中避免劫持，于是引入第三方认证权威机构"),_("code",[v._v("CA")]),v._v("，大多数操作系统的"),_("code",[v._v("CA")]),v._v("证书是默认安装的，"),_("code",[v._v("CA")]),v._v("也拥有一个公钥和私钥。任何人都可以得到"),_("code",[v._v("CA")]),v._v("的证书，其包含公钥，用以验证它所签发的证书。"),_("code",[v._v("CA")]),v._v("为服务申请者颁发证书，在"),_("code",[v._v("CA")]),v._v("判明申请者的身份后，便为他分配一个公钥，并且"),_("code",[v._v("CA")]),v._v("将该公钥与申请者的身份信息绑在一起，并为之签字后，便形成证书发给申请者。如果一个用户想鉴别一个证书的真伪，他就用"),_("code",[v._v("CA")]),v._v("的公钥对那个证书上的签字进行验证，一旦验证通过，该证书就被认为是有效的。证书实际是由证书签证机关"),_("code",[v._v("CA")]),v._v("签发的对用户的公钥的认证。")]),v._v(" "),_("h2",{attrs:{id:"传输过程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#传输过程"}},[v._v("#")]),v._v(" 传输过程")]),v._v(" "),_("ol",[_("li",[v._v("首先"),_("code",[v._v("TCP")]),v._v("三次握手建立链接，这是数据传输基础，在此之上开始"),_("code",[v._v("SSL")])]),v._v(" "),_("li",[v._v("客户端首先发送"),_("code",[v._v("Client Hello")]),v._v("开始"),_("code",[v._v("SSL")]),v._v("通信，报文中包含客户端支持的"),_("code",[v._v("SSL")]),v._v("版本、随机值"),_("code",[v._v("Random1")]),v._v("、加密算法以及密钥长度等。")]),v._v(" "),_("li",[v._v("服务器发送"),_("code",[v._v("Server Hello")]),v._v("，和客户端一样，在报文中包含"),_("code",[v._v("SSL")]),v._v("版本、随机值"),_("code",[v._v("Random2")]),v._v("以及加密组件，此后服务端将证书也发送到客户端。")]),v._v(" "),_("li",[v._v("此时客户端需要对服务端发送的证书进行验证，通过操作系统内置的"),_("code",[v._v("CA")]),v._v("证书，将服务器发送的证书的数字签名进行解密，并将证书的公钥进行相同算法的"),_("code",[v._v("HASH")]),v._v("与解密的数字签名解密的内容进行对比，验证证书是否合法有效，是否被劫持更换。")]),v._v(" "),_("li",[v._v("客户端验证证书合法，然后生成一个随机值"),_("code",[v._v("Random3")]),v._v("，用公钥对"),_("code",[v._v("Random3")]),v._v("进行加密，生成"),_("code",[v._v("Pre-Master Key")]),v._v("，客户端以"),_("code",[v._v("Client Key Exchange")]),v._v("报文将"),_("code",[v._v("Pre-Master Key")]),v._v("发送到服务端，此后发送"),_("code",[v._v("Change Cipher Spec")]),v._v("报文表示此后数据传输进行加密传输。")]),v._v(" "),_("li",[v._v("服务端将"),_("code",[v._v("Pre-Master Key")]),v._v("用自己的私钥解密为"),_("code",[v._v("Random3")]),v._v(",服务端发送"),_("code",[v._v("Change Cipher Spec")]),v._v("报文表示此后数据传输进行加密传输。")]),v._v(" "),_("li",[v._v("此时客户端与服务端都拥有三个随机字符串，且"),_("code",[v._v("Random3")]),v._v("是密文传输的，是安全状态的，此时则可以使用这三个字符串进行对称加密传输。由于非对称加密慢，不能每次传输数据都进行非对称加密，所以使用非对称加密将密钥协商好然后使用对称加密进行数据传输。")]),v._v(" "),_("li",[v._v("此时便正常进行"),_("code",[v._v("HTTP")]),v._v("数据传输，但是由于"),_("code",[v._v("SSL")]),v._v("加密的作用，此时的"),_("code",[v._v("HTTP")]),v._v("传输便是安全的，此为"),_("code",[v._v("HTTPS")]),v._v("的传输过程，其中"),_("code",[v._v("2")]),v._v("、"),_("code",[v._v("3")]),v._v("、"),_("code",[v._v("5")]),v._v("、"),_("code",[v._v("6")]),v._v("也被称为"),_("code",[v._v("SSL")]),v._v("四次握手。")])]),v._v(" "),_("h2",{attrs:{id:"每日一题"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#每日一题"}},[v._v("#")]),v._v(" 每日一题")]),v._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("https://github.com/WindrunnerMax/EveryDay\n")])]),v._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[v._v("1")]),_("br")])]),_("h2",{attrs:{id:"参考"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[v._v("#")]),v._v(" 参考")]),v._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("https://www.cnblogs.com/yangtianle/p/11202574.html\nhttps://www.cnblogs.com/liyulong1982/p/6106132.html\nhttps://blog.csdn.net/lyztyycode/article/details/81259284\nhttps://blog.csdn.net/lihuang319/article/details/79970774\nhttps://blog.csdn.net/qq_32998153/article/details/80022489\n")])]),v._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[v._v("1")]),_("br"),_("span",{staticClass:"line-number"},[v._v("2")]),_("br"),_("span",{staticClass:"line-number"},[v._v("3")]),_("br"),_("span",{staticClass:"line-number"},[v._v("4")]),_("br"),_("span",{staticClass:"line-number"},[v._v("5")]),_("br")])])])}),[],!1,null,null,null);_.default=a.exports}}]);