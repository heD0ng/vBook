(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{329:function(v,_,e){"use strict";e.r(_);var o=e(7),s=Object(o.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"cookie与session"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#cookie与session"}},[v._v("#")]),v._v(" Cookie与Session")]),v._v(" "),_("p",[v._v("会话跟踪是"),_("code",[v._v("Web")]),v._v("程序中常用的技术，"),_("code",[v._v("HTTP")]),v._v("协议是无状态的，确定用户身份就需要跟踪用户的整个会话。最常用的会话跟踪是使用"),_("code",[v._v("Cookie")]),v._v("与"),_("code",[v._v("Session")]),v._v("，简单来说"),_("code",[v._v("Cookie")]),v._v("通过在客户端记录信息确定用户身份，"),_("code",[v._v("Session")]),v._v("通过在服务器端记录信息确定用户身份。")]),v._v(" "),_("h2",{attrs:{id:"cookie"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[v._v("#")]),v._v(" Cookie")]),v._v(" "),_("p",[v._v("由于"),_("code",[v._v("HTTP")]),v._v("协议是无状态的，一旦数据交换完毕，此次链接就会关闭，再次交换数据就需要重新连接，意味着服务器无法从链接上跟踪会话。假如"),_("code",[v._v("A")]),v._v("与"),_("code",[v._v("B")]),v._v("同时购买了一件商品，不进行会话跟踪的话服务器就无法判断究竟是谁购买了此商品。"),_("br"),v._v("\n服务端为进行会话跟踪，给每个客户端颁发一个通行证，每个人访问必须携带通行证，这样服务端就能区别用户身份了。"),_("br"),v._v(" "),_("code",[v._v("Cookie")]),v._v("实际上是一小段的文本信息，服务端将需要通行证信息"),_("code",[v._v("Cookie")]),v._v("发送到浏览器，浏览器将通行证存储起来，并且对于同源的每个请求都会自动携带通行证信息("),_("code",[v._v("CSRF")]),v._v("跨站请求伪造基于此策略)，于是服务端就可以判断用户身份。")]),v._v(" "),_("h2",{attrs:{id:"session"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#session"}},[v._v("#")]),v._v(" Session")]),v._v(" "),_("p",[_("code",[v._v("Session")]),v._v("是服务器端使用的一种记录客户端状态的机制，相应的也增加了服务器的存储压力。"),_("br"),v._v("\n对于客户端的每个会话，都有一个唯一的"),_("code",[v._v("SESSION ID")]),v._v("与其对应，服务端将用户数据存储进"),_("code",[v._v("SESSION ID")]),v._v("对应的文件或者是内存中，只要客户端每次请求将"),_("code",[v._v("SESSION ID")]),v._v("交予服务端，服务端就能区别用户进行会话跟踪。")]),v._v(" "),_("h2",{attrs:{id:"实例"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[v._v("#")]),v._v(" 实例")]),v._v(" "),_("h3",{attrs:{id:"仅使用cookie"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#仅使用cookie"}},[v._v("#")]),v._v(" 仅使用Cookie")]),v._v(" "),_("p",[v._v("仅使用"),_("code",[v._v("cookie")]),v._v("而不使用"),_("code",[v._v("session")]),v._v("进行用户身份跟踪，服务端将所有的用户数据信息告知浏览器，浏览器进行存储，每次请求将数据发送到服务端。此种方式理论上可行，但是相对并不安全，尤其是在用户数据信息未加密的情况下，若是被中间人攻击则用户的数据信息将全部被泄露，或者用户自身将浏览器数据进行修改进行请求伪造，伪造他人身份访问服务器等，此外不同浏览器对于同一域"),_("code",[v._v("Cookie")]),v._v("的大小(一般为"),_("code",[v._v("4KB")]),v._v("左右)与数量都有限制，将用户数据都存储于"),_("code",[v._v("Cookie")]),v._v("可能会有空间或数量不够的情况。")]),v._v(" "),_("h3",{attrs:{id:"仅使用session"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#仅使用session"}},[v._v("#")]),v._v(" 仅使用Session")]),v._v(" "),_("p",[v._v("仅使用"),_("code",[v._v("session")]),v._v("而不使用"),_("code",[v._v("Cookie")]),v._v("进行用户身份跟踪，由于使用"),_("code",[v._v("Session")]),v._v("在客户端仅需要一个"),_("code",[v._v("SESSION ID")]),v._v("传输到服务端就能进行会话跟踪，所以实现比较简单，可以通过对所有的"),_("code",[v._v("URL")]),v._v("后拼接一个"),_("code",[v._v("SESSION ID")]),v._v("或者对于每个表单设置一个隐藏的"),_("code",[v._v("input")]),v._v("用以存储"),_("code",[v._v("SESSION ID")]),v._v("进行提交，服务器就可以进行会话跟踪，由于数据是存储在服务端，相对比较安全，且存储量大小完全取决于服务端，可以较好控制。")]),v._v(" "),_("h3",{attrs:{id:"结合使用"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#结合使用"}},[v._v("#")]),v._v(" 结合使用")]),v._v(" "),_("p",[v._v("现在普遍使用的方式就是将"),_("code",[v._v("COOKIE")]),v._v("与"),_("code",[v._v("SESSION")]),v._v("结合使用，直接将"),_("code",[v._v("SESSION ID")]),v._v("存储于"),_("code",[v._v("COOKIE")]),v._v("中，浏览器自动将同源的"),_("code",[v._v("COOKIE")]),v._v("携带在请求头中，进行会话跟踪，这样既不需要在"),_("code",[v._v("COOKIE")]),v._v("中存储大量信息，也不需要对每次请求都需要操作附带"),_("code",[v._v("SESSION ID")]),v._v("。浏览请求头中"),_("code",[v._v("Cookie")]),v._v("字段的"),_("code",[v._v("JSESSION ID=XXXXXXXXXXXXXXXXXXX")]),v._v("就是"),_("code",[v._v("Java")]),v._v("默认的"),_("code",[v._v("SESSION ID")]),v._v("，"),_("code",[v._v("PHPSESSID=XXXXXXXXXXXXXXXXXXXXXXXXXX")]),v._v("就是"),_("code",[v._v("PHP")]),v._v("默认的"),_("code",[v._v("SESSION ID")]),v._v("。")]),v._v(" "),_("h2",{attrs:{id:"差异"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#差异"}},[v._v("#")]),v._v(" 差异")]),v._v(" "),_("h3",{attrs:{id:"存储位置"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#存储位置"}},[v._v("#")]),v._v(" 存储位置")]),v._v(" "),_("p",[_("code",[v._v("Cookie")]),v._v("将数据存储在浏览器，"),_("code",[v._v("Session")]),v._v("则将数据存储在服务端。")]),v._v(" "),_("h3",{attrs:{id:"类型"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#类型"}},[v._v("#")]),v._v(" 类型")]),v._v(" "),_("p",[_("code",[v._v("Cookie")]),v._v("是存储的"),_("code",[v._v("String")]),v._v("类型，"),_("code",[v._v("Session")]),v._v("在服务端则是"),_("code",[v._v("Object")]),v._v("类型。")]),v._v(" "),_("h3",{attrs:{id:"安全"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#安全"}},[v._v("#")]),v._v(" 安全")]),v._v(" "),_("p",[_("code",[v._v("Cookie")]),v._v("在客户端用户可以进行修改伪造，"),_("code",[v._v("Session")]),v._v("在服务端用户无法进行直接的修改伪造。")]),v._v(" "),_("h3",{attrs:{id:"作用域"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#作用域"}},[v._v("#")]),v._v(" 作用域")]),v._v(" "),_("p",[_("code",[v._v("Cookie")]),v._v("由于浏览器的同源策略，只有同源的情况下才会发送，"),_("code",[v._v("Session")]),v._v("在服务端理论上可以进行多域共享。")]),v._v(" "),_("h3",{attrs:{id:"存储大小"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#存储大小"}},[v._v("#")]),v._v(" 存储大小")]),v._v(" "),_("p",[_("code",[v._v("Cookie")]),v._v("大小由浏览器限制，一般不超过"),_("code",[v._v("4KB")]),v._v("，"),_("code",[v._v("Session")]),v._v("在服务端大小可以灵活控制。")])])}),[],!1,null,null,null);_.default=s.exports}}]);